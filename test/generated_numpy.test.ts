import { describe, it, expect } from 'vitest';
import { existsSync, readFileSync } from 'node:fs';
import { join } from 'node:path';

describe('generated numpy wrapper (opportunistic)', () => {
  const generatedPath = join(process.cwd(), 'generated', 'numpy.generated.ts');

  it('exists and contains the standard header and module tag', () => {
    if (!existsSync(generatedPath)) {
      console.warn(
        '[skip] generated/numpy.generated.ts not found; run `npm run matrix` to create it'
      );
      expect(true).toBe(true);
      return;
    }
    const content = readFileSync(generatedPath, 'utf-8');
    expect(content).toContain('Generated by tywrap');
    expect(content).toContain('// Module: numpy');
  });
});
